<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <link rel="icon" href="123.png">
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>فورم متعدد الصفحات</title>

  <style>
    body {
      background-image: url('plan b cover.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      font-family: "Cairo", sans-serif;
    }

    .form-shell {
      width: 420px;
      border-radius: 20px;
      padding: 40px 30px 30px 30px;
      background: rgba(255,255,255,0.88);
      box-shadow: 0 12px 35px rgba(0,0,0,0.18);
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
    }

    .form-image {
      width: 120px; height:120px;
      border-radius:50%;
      object-fit:cover;
      margin:0 auto 20px auto;
      border:3px solid #0288d1;
    }

    h2 { color:#0277bd; margin-bottom:5px; }
    p.subtitle { margin-top:0; margin-bottom:20px; font-weight:600; }

    .form-step { display:none; }
    .form-step.active { display:block; }

    label { font-weight:700; margin-bottom:6px; display:block; }

    input, select {
      width:100%;
      padding:12px;
      margin-bottom:15px;
      border-radius:10px;
      border:none;
      background:#f1faff;
      outline:none;
    }

    .btn-row { display:flex; gap:10px; }
    .btn {
      padding:12px;
      border:none;
      border-radius:10px;
      font-weight:700;
      cursor:pointer;
    }
    .primary { background:#0288d1; color:white; }
    .ghost { background:white; border:2px solid #0288d1; color:#0288d1; }

    #loading, #success, #error { display:none; padding:20px; font-size:18px; font-weight:700; }
    #success { color:green; }
    #error { color:red; }

    @media (max-width:480px) {
      .form-shell { width:85%; padding:25px 20px; }
      .form-image { width:100px; height:100px; }
    }
  </style>
</head>

<body>

<div class="form-shell">

  <img src="CUTD2.png" class="form-image">

  <h2>فورم التسجيل</h2>
  <p class="subtitle">برجاء ملء البيانات بدقة</p>

  <div id="loading">جاري إرسال البيانات…</div>
  <div id="success">تم حفظ البيانات بنجاح ❤️</div>
  <div id="error">حدث خطأ أثناء الإرسال!</div>

  <form id="multiForm">

    <!-- STEP 1 -->
    <div class="form-step active" data-step="0">

      <label>الاسم</label>
      <input type="text" id="name" placeholder="اكتب اسمك ثلاثي هنا">

      <label>رقم الموبايل</label>
      <input type="text" id="phone" placeholder="رقم الموبايل">

      <label>المحافظة</label>
      <input type="text" id="city" placeholder="اكتب محافظتك">

      <label>السن</label>
      <input type="number" id="age" placeholder="سنك">

      <label>المؤهل الدراسي</label>
      <input type="text" id="degree" placeholder="مؤهلك الدراسي">

      <div class="btn-row">
        <button type="button" class="btn primary" id="next1">التالي</button>
      </div>
    </div>

    <!-- STEP 2 -->
    <div class="form-step" data-step="1">

      <label>المجال أو التراك اللي أنت مهتم تدخل فيه</label>
      <input type="text" id="track" placeholder="مثال: جرافيك – برمجة – سوشيال…">

      <div class="btn-row">
        <button type="button" class="btn ghost" id="back1">رجوع</button>
        <button type="button" class="btn primary" id="next2">التالي</button>
      </div>
    </div>

    <!-- STEP 3 -->
    <div class="form-step" data-step="2">

      <label>هل اخترت التراك لمشروع معين؟</label>
      <select id="goal">
        <option value="">اختر</option>
        <option>علشان يساعدني في مشروع</option>
        <option>عايز أبدأ مجال جديد</option>
        <option>لسه مش قادر أحدد</option>
      </select>

      <label>مين رشح لك بلان بي؟</label>
      <input type="text" id="ref" placeholder="اسم الشخص (لو فيه)">

      <label>تحب الميتنج يكون ازاي؟</label>
      <select id="meeting">
        <option value="">اختر</option>
        <option>أونلاين</option>
        <option>أوفلاين (في المنصورة)</option>
      </select>

      <label>ترشيح صديق (اختياري)</label>
      <input type="text" id="friendName" placeholder="اسم الصديق">
      <input type="text" id="friendPhone" placeholder="رقم الصديق">

      <div class="btn-row">
        <button type="button" class="btn ghost" id="back2">رجوع</button>
        <button type="submit" class="btn primary">إرسال</button>
      </div>
    </div>

  </form>

</div>

<script>
  const steps = document.querySelectorAll('.form-step');

  function goToStep(n){
    steps.forEach(s => s.classList.remove('active'));
    steps[n].classList.add('active');
  }

  // VALIDATE STEP 1
  document.getElementById("next1").addEventListener("click", () => {
    let name = document.getElementById("name").value.trim();
    let phone = document.getElementById("phone").value.trim();
    let city = document.getElementById("city").value.trim();
    let age = document.getElementById("age").value.trim();
    let degree = document.getElementById("degree").value.trim();

    if (!name || !phone || !city || !age || !degree) {
      alert("من فضلك املأ كل البيانات المطلوبة في الخطوة الأولى");
      return;
    }

    goToStep(1);
  });

  // VALIDATE STEP 2
  document.getElementById("next2").addEventListener("click", () => {
    let track = document.getElementById("track").value.trim();

    if (!track) {
      alert("من فضلك اكتب التراك أولاً");
      return;
    }

    goToStep(2);
  });

  document.getElementById("back1").addEventListener("click", () => goToStep(0));
  document.getElementById("back2").addEventListener("click", () => goToStep(1));

  // SUBMIT
  document.getElementById("multiForm").addEventListener("submit", async e => {
    e.preventDefault();

    let goal = document.getElementById("goal").value;
    let meeting = document.getElementById("meeting").value;

    if (!goal || !meeting) {
      alert("من فضلك اختر هدفك وطريقة الميتنج");
      return;
    }

    const data = {
      name: name.value,
      phone: phone.value,
      city: city.value,
      age: age.value,
      degree: degree.value,
      track: track.value,
      goal: goal,
      ref: ref.value,
      meeting: meeting,
      friendName: friendName.value,
      friendPhone: friendPhone.value
    };

    const scriptURL =
      "https://script.google.com/macros/s/AKfycbyJ1JDb4_O3ixrbdZ6qgTgN0pNB4iVcnOmDwEcUwLdk6WCZM8qUJYRot2cmKVzmmq5w/exec";

    document.getElementById("multiForm").style.display = "none";
    document.getElementById("loading").style.display = "block";

    try {
      await fetch(scriptURL, {
        method: "POST",
        mode: "no-cors",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      document.getElementById("loading").style.display = "none";
      document.getElementById("success").style.display = "block";

    } catch {
      document.getElementById("loading").style.display = "none";
      document.getElementById("error").style.display = "block";
    }
  });
</script>

</body>
</html>
